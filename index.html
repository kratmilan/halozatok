<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Háló Ötös</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <!-- SheetJS -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>

    <style>
        /* Modern reset és alapok */
        body {
            font-family: 'Outfit', sans-serif;
            background: #0f172a; /* Sötét háttér a modern hatáshoz */
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Glassmorphism kártyák */
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* Smooth Transitions */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity 0.3s ease, transform 0.3s ease; }
        .fade-exit { opacity: 1; transform: translateY(0); }
        .fade-exit-active { opacity: 0; transform: translateY(-10px); transition: opacity 0.3s ease, transform 0.3s ease; }

        /* Interakciók */
        .btn-action { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-action:active { transform: scale(0.96); }

        /* Progress Bar Animáció */
        .progress-fill { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }

        /* Layout stabilitás (No blink) */
        .interaction-area {
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Egyedi Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 3px; }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <!-- Felső sáv (Status Bar) -->
    <div class="w-full p-4 flex justify-between items-center z-10">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 rounded-lg bg-indigo-500 flex items-center justify-center shadow-lg shadow-indigo-500/30">
                <i class="fas fa-network-wired text-white text-sm"></i>
            </div>
            <span class="font-bold text-lg tracking-tight text-white">Háló<span class="text-indigo-400">Ötös</span></span>
        </div>
        
        <!-- Pontszám kijelző (Játék alatt látszik) -->
        <div id="stats-bar" class="hidden flex gap-3 text-xs font-semibold bg-black/20 px-3 py-1.5 rounded-full border border-white/10">
            <span class="text-green-400"><i class="fas fa-check mr-1"></i><span id="score-counter">0</span></span>
            <span class="text-white/30">|</span>
            <span class="text-blue-400"><span id="mode-indicator">Gyakorlás</span></span>
        </div>
    </div>

    <!-- Fő Tartalom -->
    <main class="flex-grow flex flex-col items-center justify-center p-4 w-full max-w-lg mx-auto relative">
        
        <!-- === 1. MENÜ KÉPERNYŐ === -->
        <div id="menu-screen" class="w-full flex flex-col gap-6 animate-fade-in">
            <div class="text-center mb-4">
                <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-pink-400 mb-2">
                    Üdv a Hálón!
                </h1>
                <p class="text-gray-400 text-sm">Válassz módot a kezdéshez</p>
                <div id="db-status" class="mt-4 text-xs font-medium py-2 px-4 rounded-full bg-white/5 inline-block text-gray-500">
                    <i class="fas fa-spinner fa-spin mr-2"></i> Adatbázis keresése...
                </div>
            </div>

            <div class="grid gap-4">
                <!-- Gyakorlás Mód Gomb -->
                <button onclick="startGame('practice')" class="btn-action w-full bg-indigo-600/20 hover:bg-indigo-600/40 border border-indigo-500/30 text-white p-5 rounded-2xl shadow-lg backdrop-blur-md flex items-center justify-between group">
                    <div class="text-left">
                        <h3 class="font-bold text-lg text-indigo-300">Gyakorlás</h3>
                        <p class="text-xs text-gray-400">15-ös blokkok, ismétléssel</p>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-indigo-500/30">
                        <i class="fas fa-layer-group text-white text-lg"></i>
                    </div>
                </button>

                <!-- Vizsga Mód Gomb -->
                <button onclick="startGame('exam')" class="btn-action w-full bg-pink-600/20 hover:bg-pink-600/40 border border-pink-500/30 text-white p-5 rounded-2xl shadow-lg backdrop-blur-md flex items-center justify-between group">
                    <div class="text-left">
                        <h3 class="font-bold text-lg text-pink-300">Vizsga</h3>
                        <p class="text-xs text-gray-400">24 véletlen kérdés, nincs segítség</p>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-pink-500 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-pink-500/30">
                        <i class="fas fa-graduation-cap text-white text-lg"></i>
                    </div>
                </button>
            </div>

            <!-- Fájl feltöltés fallback -->
            <div class="mt-4 text-center">
                <label class="text-xs text-gray-500 cursor-pointer hover:text-indigo-400 transition flex flex-col items-center gap-2 p-4 border border-dashed border-gray-700 rounded-xl hover:border-indigo-500/50">
                    <i class="fas fa-file-excel text-xl"></i>
                    <span>Ha nem tölt be automatikusan,<br>kattints ide a fájl tallózásához</span>
                    <input type="file" id="file-upload" accept=".xlsx, .xls, .csv" onchange="handleFileUpload(this)">
                </label>
            </div>
        </div>

        <!-- === 2. JÁTÉK KÉPERNYŐ === -->
        <div id="game-screen" class="hidden w-full h-full flex flex-col justify-between pb-6">
            
            <!-- Progress Top -->
            <div class="w-full mb-6">
                <div class="flex justify-between text-xs text-gray-400 mb-1 px-1">
                    <span id="progress-text">Folyamat</span>
                    <span id="retry-indicator" class="hidden text-orange-400 font-bold"><i class="fas fa-sync-alt mr-1 animate-spin-slow"></i> Javítás</span>
                </div>
                <div class="h-1.5 w-full bg-gray-700 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Kártya -->
            <div class="flex-grow flex items-center justify-center mb-6">
                <div class="glass-panel w-full min-h-[280px] rounded-3xl p-8 flex flex-col items-center justify-center text-center relative overflow-hidden shadow-2xl">
                    <!-- Dekoratív háttér elem -->
                    <div class="absolute -top-10 -right-10 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl"></div>
                    <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-pink-500/10 rounded-full blur-2xl"></div>
                    
                    <span class="text-[10px] font-bold tracking-[0.2em] text-indigo-300 uppercase mb-4 opacity-70">KÉRDÉS</span>
                    
                    <h2 id="question-text" class="text-xl md:text-2xl font-semibold leading-relaxed select-none">
                        Kérdés betöltése...
                    </h2>
                </div>
            </div>

            <!-- Interakciós Terület (Gombok vagy Visszajelzés) -->
            <div class="interaction-area w-full relative">
                
                <!-- A: Válasz Gombok -->
                <div id="controls-answer" class="absolute w-full flex gap-3 h-full items-center">
                    <button onclick="submitAnswer('I')" class="btn-action flex-1 h-16 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-800 text-white font-bold text-lg shadow-lg shadow-emerald-900/50 flex items-center justify-center gap-2 border border-emerald-500/30">
                        <i class="fas fa-check"></i> IGAZ
                    </button>
                    <button onclick="submitAnswer('H')" class="btn-action flex-1 h-16 rounded-2xl bg-gradient-to-br from-rose-600 to-rose-800 text-white font-bold text-lg shadow-lg shadow-rose-900/50 flex items-center justify-center gap-2 border border-rose-500/30">
                        <i class="fas fa-times"></i> HAMIS
                    </button>
                </div>

                <!-- B: Visszajelzés (Overlay) -->
                <div id="controls-feedback" class="absolute w-full h-full flex flex-col justify-center items-center opacity-0 pointer-events-none transition-all duration-300 transform translate-y-4">
                    
                    <!-- Dinamikus tartalom -->
                    <div id="feedback-content" class="w-full mb-3 p-4 rounded-xl border backdrop-blur-md text-left">
                        <!-- Ide kerül a JS által generált HTML -->
                    </div>

                    <button onclick="nextQuestion()" class="btn-action w-full h-14 rounded-xl bg-white text-gray-900 font-bold text-lg shadow-lg hover:bg-gray-100 flex items-center justify-center gap-2">
                        Tovább <i class="fas fa-arrow-right text-sm"></i>
                    </button>
                </div>

            </div>

            <div class="w-full text-center mt-4">
                <button onclick="exitToMenu()" class="text-gray-500 text-xs hover:text-gray-300 transition uppercase tracking-widest p-2">
                    Kilépés
                </button>
            </div>
        </div>

        <!-- === 3. EREDMÉNY KÉPERNYŐ === -->
        <div id="result-screen" class="hidden text-center w-full animate-fade-in">
            <!-- Dinamikus Eredmény Ikon -->
            <div id="result-icon-container" class="w-32 h-32 mx-auto rounded-full flex items-center justify-center shadow-xl mb-6 text-5xl text-white relative">
                <svg class="absolute w-full h-full transform -rotate-90">
                    <circle cx="64" cy="64" r="60" stroke="#334155" stroke-width="8" fill="transparent"/>
                    <circle id="result-circle" cx="64" cy="64" r="60" stroke="#22c55e" stroke-width="8" fill="transparent" stroke-dasharray="377" stroke-dashoffset="377" class="transition-all duration-1000 ease-out"/>
                </svg>
                <div id="result-percentage" class="font-bold text-2xl">0%</div>
            </div>
            
            <h2 id="result-title" class="text-3xl font-bold text-white mb-2">Eredmény</h2>
            <p id="result-subtitle" class="text-gray-400 mb-8">Részletek...</p>

            <div class="flex flex-col gap-3">
                <button onclick="startGame(currentMode)" class="btn-action w-full bg-indigo-600 hover:bg-indigo-500 text-white p-4 rounded-xl font-semibold shadow-lg shadow-indigo-500/20">
                    Újra
                </button>
                <button onclick="exitToMenu()" class="btn-action w-full bg-white/10 hover:bg-white/20 text-white p-4 rounded-xl font-semibold backdrop-blur-sm border border-white/10">
                    Vissza a menübe
                </button>
            </div>
        </div>

    </main>

    <!-- JavaScript Logika -->
    <script>
        // --- ADAT ÉS ÁLLAPOT ---
        
        let fullQuestionPool = []; 
        let currentMode = 'practice'; // 'practice' or 'exam'
        
        // Játékmenet változók
        let activePool = [];       // A jelenlegi aktív kérdések (Exam: 24 fix, Practice: 15-ös blokkok)
        let remainingGlobal = [];  // Practice módnál a "többi" kérdés
        
        let currentMistakes = [];  // Practice: javítandó kérdések
        let currentQuestion = null;
        let currentIndex = 0;      // Exam: hanyadiknál tartunk a 24-ből
        
        let globalScore = 0;
        let isRetryMode = false;   // Practice: éppen javítunk-e

        const PRACTICE_BATCH_SIZE = 15;
        const EXAM_SIZE = 24;

        // --- ADATBÁZIS BETÖLTÉS ---

        function processWorkbook(arrayBuffer) {
            try {
                const workbook = XLSX.read(arrayBuffer, {type: 'array'});
                const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                const rawData = XLSX.utils.sheet_to_json(firstSheet, {header: 1});
                
                let newQuestions = [];
                
                rawData.forEach(row => {
                    let q = row[0];
                    let a = row[1];
                    let e = row[2]; 

                    // CSV Fix logic
                    if (!a && typeof q === 'string') {
                        const match = q.match(/^(.*?)[,;]\s*([IHih])(?:\s*[,;]\s*(.*))?$/);
                        if (match) {
                            q = match[1].trim(); 
                            a = match[2].toUpperCase().trim(); 
                            if (match[3]) e = match[3].trim();
                        }
                    }

                    if (q && a) {
                        const cleanA = String(a).trim().toUpperCase();
                        if (cleanA === 'I' || cleanA === 'H') {
                            newQuestions.push({
                                t: String(q).trim(),
                                a: cleanA,
                                e: e ? String(e).trim() : null 
                            });
                        }
                    }
                });
                return newQuestions;
            } catch (error) {
                console.error(error);
                return [];
            }
        }

        async function init() {
            const statusEl = document.getElementById('db-status');
            const fileName = "Vocabulary export.xlsx";
            
            try {
                const response = await fetch(fileName);
                if (!response.ok) throw new Error("Local file not found");
                const buf = await response.arrayBuffer();
                const qs = processWorkbook(new Uint8Array(buf));
                
                if (qs.length > 0) {
                    fullQuestionPool = qs;
                    statusEl.innerHTML = `<i class="fas fa-check-circle text-green-400"></i> ${qs.length} kérdés betöltve`;
                    statusEl.className = "mt-4 text-xs font-medium py-2 px-4 rounded-full bg-green-500/10 text-green-400 border border-green-500/20";
                }
            } catch (e) {
                console.log("Auto-load failed, waiting for manual upload");
                statusEl.innerHTML = `<i class="fas fa-info-circle"></i> Várakozás fájlra...`;
            }
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const qs = processWorkbook(new Uint8Array(e.target.result));
                if (qs.length > 0) {
                    fullQuestionPool = qs;
                    alert(`${qs.length} kérdés sikeresen betöltve!`);
                    document.getElementById('db-status').innerHTML = `<i class="fas fa-check-circle text-green-400"></i> ${qs.length} kérdés`;
                } else {
                    alert("Nem találtam érvényes kérdéseket a fájlban.");
                }
            };
            reader.readAsArrayBuffer(file);
        }

        // --- SEGÉDFÜGGVÉNYEK ---

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- JÁTÉK INDÍTÁS ---

        function startGame(mode) {
            if (fullQuestionPool.length === 0) {
                alert("Kérlek tölts be előbb egy kérdéssort!");
                return;
            }

            currentMode = mode;
            globalScore = 0;
            currentIndex = 0;
            currentMistakes = [];
            isRetryMode = false;

            // Mód specifikus beállítások
            if (mode === 'practice') {
                remainingGlobal = shuffle([...fullQuestionPool]);
                document.getElementById('mode-indicator').innerText = "Gyakorlás";
                loadNextPracticeBatch(); // Start Practice Loop
            } else {
                // Exam mode: Vegyünk ki 24 véletlen kérdést
                activePool = shuffle([...fullQuestionPool]).slice(0, EXAM_SIZE);
                document.getElementById('mode-indicator').innerText = "Vizsga";
                renderQuestion(); // Start Exam Loop
            }
            
            // UI Setup
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('stats-bar').classList.remove('hidden');
        }

        // --- PRACTICE MÓD LOGIKA ---

        function loadNextPracticeBatch() {
            isRetryMode = false;
            currentMistakes = [];
            
            if (remainingGlobal.length === 0) {
                showFinalResult(true); // Végeztünk az összessel
                return;
            }

            const countToTake = Math.min(PRACTICE_BATCH_SIZE, remainingGlobal.length);
            activePool = remainingGlobal.splice(0, countToTake);
            renderQuestion();
        }

        function handlePracticeNext() {
            // Ha a jelenlegi batch elfogyott
            if (activePool.length === 0) {
                if (currentMistakes.length > 0) {
                    // Javítás
                    isRetryMode = true;
                    activePool = shuffle([...currentMistakes]);
                    currentMistakes = [];
                    alert(`Blokk vége! ${activePool.length} kérdést újra kell ismételned, mert elrontottad.`);
                    renderQuestion();
                } else {
                    // Következő blokk
                    loadNextPracticeBatch();
                }
            } else {
                renderQuestion();
            }
        }

        // --- EXAM MÓD LOGIKA ---

        function handleExamNext() {
            currentIndex++;
            if (currentIndex >= activePool.length) {
                showFinalResult(false);
            } else {
                renderQuestion();
            }
        }

        // --- KÖZÖS RENDERER ---

        function renderQuestion() {
            // Melyik kérdés jön?
            if (currentMode === 'practice') {
                if (activePool.length === 0) {
                    handlePracticeNext(); // Edge case check
                    return;
                }
                currentQuestion = activePool[0]; // Mindig a tömb elejéről szedjük ki practice módban
            } else {
                currentQuestion = activePool[currentIndex];
            }

            const cardText = document.getElementById('question-text');
            const scoreEl = document.getElementById('score-counter');
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            const retryIndicator = document.getElementById('retry-indicator');

            // Reset UI
            document.getElementById('controls-answer').style.opacity = '1';
            document.getElementById('controls-answer').style.pointerEvents = 'auto';
            document.getElementById('controls-feedback').style.opacity = '0';
            document.getElementById('controls-feedback').style.pointerEvents = 'none';
            document.getElementById('controls-feedback').classList.remove('translate-y-0');
            document.getElementById('controls-feedback').classList.add('translate-y-4');

            cardText.innerText = currentQuestion.t;
            scoreEl.innerText = globalScore;

            // Progress kijelzés mód szerint
            if (currentMode === 'practice') {
                if (isRetryMode) {
                    retryIndicator.classList.remove('hidden');
                    progressText.innerText = `Javítás (${activePool.length} maradt)`;
                    progressBar.style.width = '100%';
                    progressBar.className = "h-full bg-orange-500 progress-fill";
                } else {
                    retryIndicator.classList.add('hidden');
                    progressText.innerText = `Aktív blokk`;
                    progressBar.className = "h-full bg-gradient-to-r from-indigo-500 to-purple-500 progress-fill";
                    progressBar.style.width = '60%'; // Indeterminate look
                }
            } else {
                // Exam: X / 24
                retryIndicator.classList.add('hidden');
                progressText.innerText = `${currentIndex + 1} / ${EXAM_SIZE}`;
                const pct = ((currentIndex + 1) / EXAM_SIZE) * 100;
                progressBar.className = "h-full bg-pink-500 progress-fill";
                progressBar.style.width = `${pct}%`;
            }
        }

        function submitAnswer(userChoice) {
            const isCorrect = userChoice === currentQuestion.a;
            
            // UI Váltás
            const answerControls = document.getElementById('controls-answer');
            const feedbackControls = document.getElementById('controls-feedback');
            const feedbackContent = document.getElementById('feedback-content');

            answerControls.style.opacity = '0';
            answerControls.style.pointerEvents = 'none';
            
            feedbackControls.classList.remove('translate-y-4');
            feedbackControls.classList.add('translate-y-0');
            feedbackControls.style.opacity = '1';
            feedbackControls.style.pointerEvents = 'auto';

            const correctText = currentQuestion.a === 'I' ? 'IGAZ' : 'HAMIS';
            const explanation = currentQuestion.e ? `<div class="mt-2 text-sm opacity-80 border-t border-white/20 pt-2">${currentQuestion.e}</div>` : '';

            // Pontozás és logika
            if (isCorrect) {
                if (currentMode === 'exam' || !isRetryMode) {
                    globalScore++;
                }

                feedbackContent.className = "w-full mb-3 p-4 rounded-xl border border-emerald-500/30 bg-emerald-500/10 backdrop-blur-md text-left";
                feedbackContent.innerHTML = `
                    <div class="flex items-center gap-3 mb-1">
                        <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-white">
                            <i class="fas fa-check"></i>
                        </div>
                        <span class="font-bold text-emerald-400 text-lg">Helyes!</span>
                    </div>
                    ${explanation}
                `;
            } else {
                // Ha Practice mód: Hiba rögzítése
                if (currentMode === 'practice') {
                    currentMistakes.push(currentQuestion);
                }

                feedbackContent.className = "w-full mb-3 p-4 rounded-xl border border-rose-500/30 bg-rose-500/10 backdrop-blur-md text-left";
                feedbackContent.innerHTML = `
                    <div class="flex items-center gap-3 mb-1">
                        <div class="w-8 h-8 rounded-full bg-rose-500 flex items-center justify-center text-white">
                            <i class="fas fa-times"></i>
                        </div>
                        <span class="font-bold text-rose-400 text-lg">Téves</span>
                    </div>
                    <p class="text-sm text-gray-300">A helyes válasz: <strong class="text-white">${correctText}</strong></p>
                    ${explanation}
                `;
            }
            
            document.getElementById('score-counter').innerText = globalScore;
        }

        function nextQuestion() {
            if (currentMode === 'practice') {
                activePool.shift(); // Kivesszük a megválaszoltat (sikeres vagy sem, már feldolgoztuk)
                handlePracticeNext();
            } else {
                handleExamNext();
            }
        }

        function showFinalResult(isPracticeComplete) {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('stats-bar').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            const title = document.getElementById('result-title');
            const subtitle = document.getElementById('result-subtitle');
            const circle = document.getElementById('result-circle');
            const percentageText = document.getElementById('result-percentage');
            
            let percentage = 0;
            let total = 0;

            if (currentMode === 'practice') {
                title.innerText = "Gyakorlás Vége!";
                subtitle.innerText = "Sikeresen végigmentél az összes kérdésen.";
                percentage = 100;
                circle.setAttribute('stroke', '#22c55e'); // Green
            } else {
                // Exam Mode
                total = EXAM_SIZE;
                percentage = Math.round((globalScore / total) * 100);
                title.innerText = "Vizsga Eredmény";
                subtitle.innerText = `${total} kérdésből ${globalScore} helyes válasz.`;
                
                // Color coding
                if (percentage >= 80) circle.setAttribute('stroke', '#22c55e'); // 5-ös
                else if (percentage >= 60) circle.setAttribute('stroke', '#eab308'); // 3-4-es
                else circle.setAttribute('stroke', '#ef4444'); // Bukó
            }

            percentageText.innerText = `${percentage}%`;
            
            // Animáció (r=60, kerület = ~377)
            const circumference = 377;
            const offset = circumference - (percentage / 100) * circumference;
            setTimeout(() => {
                circle.style.strokeDashoffset = offset;
            }, 100);
        }

        function exitToMenu() {
            if(confirm("Biztosan ki akarsz lépni?")) {
                document.getElementById('game-screen').classList.add('hidden');
                document.getElementById('result-screen').classList.add('hidden');
                document.getElementById('stats-bar').classList.add('hidden');
                document.getElementById('menu-screen').classList.remove('hidden');
            }
        }

        init();

    </script>
</body>
</html>
